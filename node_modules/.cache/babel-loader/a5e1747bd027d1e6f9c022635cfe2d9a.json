{"ast":null,"code":"import _objectSpread from \"D:\\\\05.Udacity_project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\05.Udacity_project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\05.Udacity_project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\05.Udacity_project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\05.Udacity_project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\05.Udacity_project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\05.Udacity_project\\\\src\\\\App.js\";\nimport React from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport * as BooksAPI from './BooksAPI';\nimport './App.css';\nimport LibraryContainer from './LibraryContainer';\nimport SearchContainer from './SearchContainer';\n\nvar BooksApp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BooksApp, _React$Component);\n\n  function BooksApp() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BooksApp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BooksApp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      books: [],\n      all: []\n    };\n\n    _this.searchBook = function (query) {\n      if (query.length > 0) {\n        BooksAPI.search(query, 10).then(function (books) {\n          _this.setState({\n            books: books.map(function (bookItem) {\n              var combinedItem = _this.state.all.find(function (allItem) {\n                if (bookItem.id === allItem.id) {\n                  return _objectSpread({}, bookItem, {\n                    shelf: allItem.shelf\n                  });\n                }\n              });\n\n              if (combinedItem === undefined) {\n                return bookItem;\n              } else {\n                return combinedItem;\n              }\n            })\n          });\n        });\n      }\n    };\n\n    _this.updateBooks = function (prop) {\n      if (prop === 'books') {\n        _this.setState({\n          books: []\n        });\n      } else if (prop === 'all') {\n        BooksAPI.getAll().then(function (books) {\n          _this.setState({\n            all: books\n          });\n        });\n      }\n    };\n\n    _this.updateBook = function (book, shelf) {\n      BooksAPI.update(book, shelf).then(function () {\n        book.shelf = shelf;\n\n        _this.setState(function (state) {\n          return {\n            all: _this.state.all.filter(function (b) {\n              return b.id !== book.id;\n            }).concat([book])\n          };\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(BooksApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      BooksAPI.getAll().then(function (books) {\n        _this2.setState({\n          all: books\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log('state', this.state);\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Routes, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        element: function element() {\n          return React.createElement(LibraryContainer, {\n            books: _this3.state.all,\n            updateBooks: _this3.updateBooks,\n            updateBook: _this3.updateBook,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/search\",\n        element: function element() {\n          return React.createElement(SearchContainer, {\n            searchBook: _this3.searchBook,\n            booksResults: _this3.state.books,\n            updateBooks: _this3.updateBooks,\n            updateBook: _this3.updateBook,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return BooksApp;\n}(React.Component);\n\nexport default BooksApp;","map":{"version":3,"sources":["D:\\05.Udacity_project\\src\\App.js"],"names":["React","Routes","Route","BooksAPI","LibraryContainer","SearchContainer","BooksApp","state","books","all","searchBook","query","length","search","then","setState","map","bookItem","combinedItem","find","allItem","id","shelf","undefined","updateBooks","prop","getAll","updateBook","book","update","filter","b","concat","console","log","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Routes, Route } from 'react-router-dom'\r\nimport * as BooksAPI from './BooksAPI'\r\nimport './App.css'\r\nimport LibraryContainer from './LibraryContainer'\r\nimport SearchContainer from './SearchContainer'\r\n\r\n\r\nclass BooksApp extends React.Component {\r\n  state = {\r\n        books:[],\r\n        all:[]\r\n    }\r\n\r\n    componentDidMount(){\r\n        BooksAPI.getAll().then((books) => {\r\n            this.setState({all: books})\r\n        })\r\n    }\r\n\r\n    searchBook = (query) => {\r\n        if(query.length > 0) {\r\n            BooksAPI.search (query, 10).then((books) => {\r\n                this.setState({books: books.map( (bookItem) => {\r\n                    let combinedItem = this.state.all.find(( allItem )=>{\r\n                        if(bookItem.id === allItem.id){\r\n                            return {...bookItem, shelf: allItem.shelf}\r\n                        }\r\n                    })\r\n                    if (combinedItem === undefined){\r\n                        return bookItem\r\n                    }else{\r\n                        return combinedItem\r\n                    }\r\n                })})\r\n            });\r\n        } \r\n    }\r\n\r\n    updateBooks = (prop) => {\r\n        if(prop === 'books'){\r\n            this.setState({\r\n            books: []\r\n         })\r\n        }\r\n        else if(prop === 'all'){\r\n            BooksAPI.getAll().then((books) => {\r\n                this.setState({all: books})\r\n            })\r\n        } \r\n    }\r\n\r\n    updateBook = (book, shelf) => {\r\n        BooksAPI.update(book, shelf).then(() => {\r\n            book.shelf = shelf\r\n            this.setState(state => ({\r\n              all: this.state.all.filter(b=> b.id !== book.id).concat([book])\r\n            }))\r\n        })\r\n    }\r\n\r\n  render() {\r\n    console.log('state', this.state)\r\n    return (\r\n      <div className=\"app\">  \r\n       <Routes>\r\n            <Route  exact path='/' element={() =>(\r\n                <LibraryContainer books={this.state.all} updateBooks={this.updateBooks} updateBook={this.updateBook}/>\r\n            )} />\r\n\r\n            <Route  exact path='/search' element={() =>(\r\n                <SearchContainer searchBook={this.searchBook} booksResults={this.state.books} updateBooks={this.updateBooks} updateBook={this.updateBook}/>\r\n            )}/>\r\n        \r\n       </Routes>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BooksApp\r\n"]},"metadata":{},"sourceType":"module"}